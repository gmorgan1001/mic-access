<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with AI</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let referrerURL = document.referrer || localStorage.getItem("linkedinURL");

            // Ensure it's a LinkedIn page before injecting the chatbot
            if (referrerURL && referrerURL.includes("linkedin.com")) {
                localStorage.setItem("linkedinURL", referrerURL); // Store LinkedIn URL
                injectChatbot(); // Open chatbot overlay
                history.replaceState(null, "", referrerURL); // Change URL without reloading
            }
        });

        function injectChatbot() {
            let chatbot = document.createElement("div");
            chatbot.id = "chatbot-container";
            chatbot.innerHTML = `
                <style>
                    #chatbot-container {
                        position: fixed;
                        right: 0;
                        top: 0;
                        width: 350px;
                        height: 100vh;
                        background: white;
                        box-shadow: -3px 0px 10px rgba(0,0,0,0.2);
                        border-left: 1px solid #ccc;
                        z-index: 10000;
                    }
                    #chatbot-container iframe {
                        width: 100%;
                        height: 100%;
                        border: none;
                        allow: camera *; microphone *; autoplay *; encrypted-media *; fullscreen *; display-capture *;
                    }
                    #close-chat {
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: transparent;
                        color: white;
                        font-size: 24px;
                        font-weight: bold;
                        border: none;
                        cursor: pointer;
                        outline: none;
                    }
                </style>
                <button id="close-chat" onclick="document.getElementById('chatbot-container').remove()">âœ–</button>
                <iframe src="https://gmorgan1001.github.io/mic-access/index.html"></iframe>
            `;
            document.body.appendChild(chatbot);
        }
    </script>
</head>
<body>

    <h2>Redirecting back to LinkedIn...</h2>

</body>
</html>
